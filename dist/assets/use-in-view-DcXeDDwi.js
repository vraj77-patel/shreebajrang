import{r as t}from"./vendor-CVH_FCNo.js";import{r as e}from"./proxy-B852kSQQ.js";const r={some:0,all:1};function o(o,{root:n,margin:s,amount:i,once:a=!1,initial:c=!1}={}){const[u,f]=t.useState(c);return t.useEffect(()=>{if(!o.current||a&&u)return;const t={root:n&&n.current||void 0,margin:s,amount:i};return function(t,o,{root:n,margin:s,amount:i="some"}={}){const a=e(t),c=new WeakMap,u=new IntersectionObserver(t=>{t.forEach(t=>{const e=c.get(t.target);if(t.isIntersecting!==Boolean(e))if(t.isIntersecting){const e=o(t.target,t);"function"==typeof e?c.set(t.target,e):u.unobserve(t.target)}else"function"==typeof e&&(e(t),c.delete(t.target))})},{root:n,rootMargin:s,threshold:"number"==typeof i?i:r[i]});return a.forEach(t=>u.observe(t)),()=>u.disconnect()}(o.current,()=>(f(!0),a?void 0:()=>f(!1)),t)},[n,o,s,a,i]),u}export{o as u};
